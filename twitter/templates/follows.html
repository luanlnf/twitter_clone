{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container py-4">
  <h2 class="fw-bold mb-4">{{ request.user.username }} is Following...</h2>

  {% if profiles %}
    {% for profile in profiles.follows.all %}

      <div class="card shadow-sm mb-4" style="max-width: 540px;">
        <div class="row g-0">

          <div class="col-md-4">
            {% if profile.profile_image %}
            <img
              src="{{ profile.profile_image.url }}"
              class="img-fluid rounded-start"
            />
            {% else %}
            <img
              src="{% static 'images/default_profile_pic.png' %}"
              class="img-fluid rounded-start"
            />
            {% endif %}
          </div>

          <div class="col-md-8">
            <div class="card-body">

              <h5 class="card-title d-flex justify-content-between">
                {{ profile.user.username }}

                {% if profile in profiles.follows.all %}
                <a href="{% url 'unfollow' profile.user.id %}">
                  <i class="fa fa-user-minus text-secondary"></i>
                </a>
                {% else %}
                <a href="{% url 'follow' profile.user.id %}">
                  <i class="fa fa-user-plus text-secondary"></i>
                </a>
                {% endif %}
              </h5>

              <p class="mb-1">
                <a href="{% url 'profile' profile.user.id %}">
                  @{{ profile.user.username|lower }}
                </a>
              </p>

              <small class="text-muted">
                Last updated: {{ profile.date_modified }}
              </small>

            </div>
          </div>

        </div>
      </div>

    {% endfor %}
  {% endif %}
</div>

{% endblock %}
